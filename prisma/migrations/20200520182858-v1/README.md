# Migration `20200520182858-v1`

This migration has been generated by Phuc Tran at 5/20/2020, 6:28:58 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "habittracker"."User" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"email" text  NOT NULL ,"firstname" text   ,"id" SERIAL,"lastname" text   ,"password" text  NOT NULL ,"username" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "habittracker"."Habit" (
"description" text   ,"id" SERIAL,"startDate" timestamp(3)  NOT NULL ,"title" text  NOT NULL ,"userId" integer   ,
    PRIMARY KEY ("id"))

CREATE TABLE "habittracker"."Entry" (
"done" timestamp(3)  NOT NULL ,"habitId" integer   ,"id" SERIAL,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "User.email" ON "habittracker"."User"("email")

ALTER TABLE "habittracker"."Habit" ADD FOREIGN KEY ("userId")REFERENCES "habittracker"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "habittracker"."Entry" ADD FOREIGN KEY ("habitId")REFERENCES "habittracker"."Habit"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200520182858-v1
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,36 @@
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id        Int      @default(autoincrement()) @id
+  email     String   @unique
+  password  String
+  username  String?
+  firstname String?
+  lastname  String?
+  createdAt DateTime @default(now())
+  habits    Habit[]
+}
+
+model Habit {
+  id          Int      @default(autoincrement()) @id
+  title       String
+  description String?
+  startDate   DateTime
+  entries     Entry[]
+  User        User?    @relation(fields: [userId], references: [id])
+  userId      Int?
+}
+
+model Entry {
+  id      Int      @default(autoincrement()) @id
+  done    DateTime
+  Habit   Habit?   @relation(fields: [habitId], references: [id])
+  habitId Int?
+}
```


